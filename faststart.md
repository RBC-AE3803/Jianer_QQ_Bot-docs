# å¿«é€Ÿå¼€å§‹
ç†è®ºä¸Šå…¨å¹³å°é€šç”¨ã€‚é’ˆå¯¹ä¸åŒçš„å‘è¡Œç‰ˆï¼Œä½ éœ€è¦é€‰æ‹©ä¸åŒçš„ [Python](https://www.python.org) ç‰ˆæœ¬ã€‚

- ç®€å„¿2 æˆ– ç®€å„¿3ï¼šPython >= **3.9** å³å¯ (å»ºè®®: **3.10+**)
- ç®€å„¿ NEXT 3 ç­‰å¸¦æœ‰ NEXT å­—æ ·çš„ç‰ˆæœ¬ï¼šPython > **3.11** å³å¯ (å»ºè®®: **3.12+**)

## éƒ¨ç½²
1. Clone æœ¬ä»“åº“ (å»ºè®®å…ˆ Fork / Use this template)

```shell
git clone https://github.com/SRInternet-Studio/Jianer_QQ_bot.git
```
2. å®‰è£…ä¾èµ– requirements.txt

    **æ³¨æ„ï¼šéƒ¨åˆ†é¢„è§ˆç‰ˆåˆ†æ”¯çš„ requirements.txt å¯èƒ½å­˜åœ¨é—æ¼ã€‚å¦‚æžœæŒ‰ç…§ä»¥ä¸‹æ“ä½œå®‰è£…å®ŒæˆåŽï¼Œä¾ç„¶æ— æ³•ä½¿ç”¨ï¼Œä½ å¯èƒ½éœ€è¦æ ¹æ®é”™è¯¯ä¿¡æ¯éœ€è¦æ‰‹åŠ¨å®‰è£…ä¾èµ–åº“ã€‚**

ä»Žå®˜æ–¹å®‰è£…
```shell
pip install -r requirements.txt
```
å›½å†…æœåŠ¡å™¨å¯ä½¿ç”¨æ¸…åŽæºæˆ–è€…å…¶ä»–æºï¼Œä¾‹å¦‚
```shell
pip install -r requirements.txt -i https://pypi.tuna.tsinghua.edu.cn/simple
```

3. å®‰è£… **VC++**

    æœ‰ä¸€äº›ç”¨æˆ·çš„ Windows ç³»ç»Ÿä¸­å¯èƒ½æ²¡æœ‰ ```Visual C++ Redistributable``` ä¼šå¯¼è‡´ PySide6 æŠ¥é”™ï¼š

```
from Shiboken6.Shiboken import
ImportError: DLL load failed while importing Shiboken: æ‰¾ä¸åˆ°æŒ‡å®šçš„æ¨¡å—
```

å¯ä»¥é€šè¿‡ [å®‰è£… Visual C++ Redistributable](https://learn.microsoft.com/en-us/cpp/windows/latest-supported-vc-redist?view=msvc-170) è§£å†³æ­¤ç±»é—®é¢˜ã€‚

è¯·æ³¨æ„ï¼Œå¦‚æžœæ‚¨çš„ç”µè„‘ç³»ç»Ÿæ˜¯ Linux æˆ–å·²ç»å®‰è£… ```Visual C++ Redistributable``` ï¼Œåˆ™æ— éœ€é‡å¤å®‰è£…æˆ–ä¿®å¤ã€‚

## é…ç½®
### å›¾å½¢åŒ–é…ç½®

> [!NOTE]
> 
> æœ¬ä»“åº“éƒ¨åˆ† Preview åˆ†æ”¯å¯èƒ½æ²¡æœ‰è®¾ç½®å‘å¯¼ ```SetupWizard.pyw``` ï¼ŒDevåˆ†æ”¯æ°¸è¿œä¸ä¼šæœ‰è®¾ç½®å‘å¯¼ï¼Œå¯èƒ½æ˜¯å› ä¸ºå…¶æ›´æ–°é¢‘çŽ‡è¿œè¿œå¿«ä¸Ž main åˆ†æ”¯ã€‚å¦‚æžœä½ æ²¡æœ‰åœ¨åˆ†æ”¯çš„æ–‡ä»¶å†…å®¹ä¸­å‘çŽ° ```SetupWizard.pyw``` ï¼Œåˆ™[æœ¬èŠ‚](#å›¾å½¢åŒ–é…ç½®)å†…å®¹ä¸é€‚ç”¨äºŽæ­¤åˆ†æ”¯ã€‚è¯·å‰å¾€[æ‰‹åŠ¨é…ç½®](#æ‰‹åŠ¨é…ç½®)ç« èŠ‚æŒ‰ç…§æŒ‡å®šé¡ºåºå’Œæ“ä½œç¼–è¾‘é…ç½®æ–‡ä»¶ï¼Œå®Œæˆé…ç½®ã€‚

å¯åŠ¨è®¾ç½®å‘å¯¼

```shell
python SetupWizard.pyw
```

**ä¾æ¬¡æ‰“å¼€è®¾ç½®å‘å¯¼ä¸­çš„æ¯ä¸€ä¸ªé¡µé¢ï¼Œå®Œæˆå…¶ä¸­çš„æ¯ä¸€ä¸ªæ¡ç›®ä»¥ç¡®ä¿ç¨‹åºèƒ½æ­£å¸¸è¿è¡Œã€‚**

ç„¶åŽï¼Œæ‰“å¼€ **æ ¸å¯¹å¹¶åº”ç”¨è®¾ç½®** é¡µé¢ï¼Œç‚¹å‡» **åº”ç”¨** ï¼Œçœ‹åˆ°é¡µé¢æ ‡é¢˜æ˜¾ç¤º â€œå·²æˆåŠŸä¿å­˜â€ å³è¡¨é¢è®¾ç½®æ ¸éªŒæ— é—®é¢˜ï¼Œå¹¶å·²ç»ä¿å­˜ã€‚

è‹¥å‡ºçŽ°é”™è¯¯ï¼Œè¯·æµè§ˆä¸‹æ–¹çš„è®¾ç½®å†…å®¹æ–‡æœ¬æ¡†æ‰¾åˆ°æŠ¥é”™è¯¦ç»†ä¿¡æ¯ï¼Œå¹¶æ ¹æ®æŠ¥é”™æç¤ºä¿®æ”¹æ‚¨çš„é…ç½®ã€‚

> [!TIP]
> 
> Linux (æ²¡æœ‰æ¡Œé¢) çš„ç”¨æˆ·å¯å…ˆåœ¨ Windows ä¸Šå¯åŠ¨é…ç½®ç¨‹åº,ä¿å­˜é…ç½®åŽå°†æ ¹ç›®å½•ä¸‹çš„ ```appsettings.json``` ```config.json``` å’Œ ```prerequisites.py``` å¤åˆ¶åˆ°æœåŠ¡å™¨å³å¯ã€‚

### æ‰‹åŠ¨é…ç½®
1. åè®®ç«¯é…ç½®

   åˆ›å»º æˆ– æ‰“å¼€ ```appsettings.json``` æ–‡ä»¶ï¼Œå¤åˆ¶ä»¥ä¸‹å†…å®¹åˆ°æ–‡ä»¶ä¸­ï¼ˆå¦‚æžœå·²æœ‰å†…å®¹åˆ™æ— é¡»å¤åˆ¶ï¼‰

```json
{
    "$schema": "https://raw.githubusercontent.com/LagrangeDev/Lagrange.Core/master/Lagrange.OneBot/Resources/appsettings_schema.json",
    "Logging": {
        "LogLevel": {
            "Default": "Information",
            "Microsoft": "Warning",
            "Microsoft.Hosting.Lifetime": "Information"
        }
    },
    "SignServerUrl": "https://sign.lagrangecore.org/api/sign/30366",
    "SignProxyUrl": "",
    "MusicSignServerUrl": "",
    "Account": {
        "Uin": 2399451783,
        "Protocol": "Linux",
        "AutoReconnect": true,
        "GetOptimumServer": true
    },
    "Message": {
        "IgnoreSelf": true,
        "StringPost": false
    },
    "QrCode": {
        "ConsoleCompatibilityMode": false
    },
    "Implementations": [
        {
            "Type": "ForwardWebSocket",
            "Host": "127.0.0.1",
            "Port": 5004,
            "HeartBeatInterval": 5000,
            "AccessToken": ""
        }
    ]
}
```
æ‰¾åˆ°ä½äºŽ ```Account``` ä¸‹çš„ ```Uin```ï¼Œå°† ```2399451783``` æ›¿æ¢ä¸ºä½ çš„QQæœºå™¨äººçš„QQå·ã€‚

2. æœºå™¨äººé…ç½®

    åˆ›å»º æˆ– æ‰“å¼€ ```config.json``` æ–‡ä»¶ï¼Œå¤åˆ¶ä»¥ä¸‹å†…å®¹åˆ°æ–‡ä»¶ä¸­ï¼ˆå¦‚æžœå·²æœ‰å†…å®¹åˆ™æ— é¡»å¤åˆ¶ï¼‰

```json
{
    "owner": [
      2399451783
    ],
    "black_list": [
    ],
    "silents": [
    ],
    "Connection": {
      "mode": "FWS",
      "host": "127.0.0.1",
      "port": 5004,
      "listener_host": "127.0.0.1",
      "listener_port": 5003,
      "retries": 5,
      "satori_token": ""
    },
    "Log_level": "DEBUG",
    "protocol": "OneBot",
    "Others": {
      "gemini_key": "",
      "openai_key": "",
      "deepseek_key": "",
      "bot_name": "ç®€å„¿" ,
      "bot_name_en": "Jianer",
      "ROOT_User": [""],
      "Auto_approval": [""],
      "reminder": "~",
      "slogan": "ç®€å• å¯çˆ± ä¸ªæ€§ å…¨çŸ¥", 
      "TTS": {"voiceColor": "zh-CN-XiaoyiNeural",
              "rate": "+0%",
              "volume": "+0%",
              "pitch": "+0Hz"
          }, 
      "compliment": ["å•Šï¼è€â€¦â€¦è€å…¬ï¼Œåˆ«æ€Žä¹ˆè¯´å•¦ï¼Œäººâ€¦â€¦äººå®¶å¥½å®³ç¾žçš„å•¦ï¼Œäººå®¶è¿˜ä¼šåŠªåŠ›çš„(*á´—ÍˆË¬á´—Íˆ)ê•¤*.ï¾Ÿ", 
        "å•Š~è€å…¬~ä½ ä¸è¦è¿™ä¹ˆå¤¸äººå®¶å•¦~ã€ƒâˆ€ã€ƒ", 
        "å””â€¦â€¦è°¢â€¦â€¦è°¢è°¢è€å…¬å•¦ðŸ¥°~"]
      },
      "uin": 0
}
```

æ›´æ”¹ä»¥ä¸‹å†…å®¹
 - ```owner```ï¼šæ›¿æ¢ä¸ºä½ çš„QQæœºå™¨äººçš„QQå·
 - ```black_list```ï¼šæ•´æ•°åž‹åˆ—è¡¨ï¼Œæœºå™¨äººå“åº”çš„é»‘åå•ã€‚å¡«å†™åœ¨è¿™ä¸ªåˆ—è¡¨ä¸­çš„QQå·ï¼Œå…¶æ‰€å‘é€çš„æ¶ˆæ¯ä¸ä¼šè¢«ä»»ä½•æ¨¡å—å¤„ç†
 - ```Log_level```ï¼šæ—¥å¿—ç­‰çº§ã€‚å¯é€‰å€¼ä¸ºDEBUGã€TRACEã€INFOã€WARNINGã€ERRORã€CRITICA
 - ```Others``` ```gemini_key```ï¼šä½¿ç”¨ Google Gemini æ¨¡åž‹çš„ API KEY
 - ```Others``` ```openai_key```ï¼šä½¿ç”¨ ChatGPT æ¨¡åž‹çš„ API KEY
 - ```Others``` ```deepseek_key```ï¼šä½¿ç”¨ Deepseek æ¨¡åž‹çš„ API KEY
 - ```Others``` ```bot_name```ï¼šæ›¿æ¢ä¸ºä½ æƒ³ç»™ä½ çš„æœºå™¨äººå–çš„æ˜µç§°
 - ```Others``` ```bot_name_en```ï¼šæ›¿æ¢ä¸ºä½ æƒ³ç»™ä½ çš„æœºå™¨äººå–çš„è‹±æ–‡æ˜µç§°
 - ```Others``` ```ROOT_User```ï¼šå­—ç¬¦ä¸²åˆ—è¡¨ã€‚æœºå™¨äººçš„æ ¹ç”¨æˆ·ç»„ï¼Œå¡«å†™æ ¹ç”¨æˆ·ç»„çš„QQå·ã€‚æ ¹ç”¨æˆ·ç»„å…·æœ‰ç¾¤ç®¡çš„æœ€é«˜æƒé™ï¼ŒåŒæ—¶æ— æ³•åœ¨ç¾¤èŠä¸­æ›´æ”¹å’Œåˆ é™¤æ ¹ç”¨æˆ·ç»„ã€‚**å¼ºçƒˆå»ºè®®å¡«å†™ä½ è‡ªå·±çš„QQå·**
 - ```Others``` ```Auto_approval```ï¼šå­—ç¬¦ä¸²åˆ—è¡¨ã€‚è‡ªåŠ¨å®¡æ‰¹ç­”æ¡ˆåˆ—è¡¨ã€‚ä»…åœ¨å½“æœºå™¨äººå…·æœ‰ç®¡ç†å‘˜èº«ä»½æ—¶ï¼Œå¦‚æžœæ–°åŠ ç¾¤çš„ç”¨æˆ·å‘é€çš„ç­”æ¡ˆå­˜åœ¨äºŽè¯¥åˆ—è¡¨ä¹‹ä¸­ï¼Œåˆ™è‡ªåŠ¨åŒæ„åŠ ç¾¤ç”³è¯·
 - ```Others``` ```reminder```ï¼šæ›¿æ¢ä¸ºä½ çš„æœºå™¨äººçš„è§¦å‘å…³é”®ç¬¦å·ï¼ˆè§¦å‘å…³é”®è¯ï¼‰ã€‚å¦‚æžœç”¨æˆ·åœ¨ç¾¤èŠä¸­å‘é€çš„æ¶ˆæ¯ä»¥è¯¥å…³é”®è¯å¼€å¤´ï¼Œåˆ™å“åº”ç”¨æˆ·æ¶ˆæ¯
 - ```Others``` ```slogan```ï¼šæ›¿æ¢ä¸ºä½ çš„æœºå™¨äººçš„å®£ä¼ æ ‡è¯­
 - ```Others``` ```TTS``` ```voiceColor```ï¼šEdgeTTS åœ¨ç”ŸæˆAIè¯­éŸ³å›žå¤æ—¶æ‰€ä½¿ç”¨çš„éŸ³è‰²
 - ```Others``` ```TTS``` ```rate```ï¼šEdgeTTS åœ¨ç”ŸæˆAIè¯­éŸ³å›žå¤æ—¶å¯¹è¯­é€Ÿçš„è®¾å®š
 - ```Others``` ```TTS``` ```volume```ï¼šEdgeTTS åœ¨ç”ŸæˆAIè¯­éŸ³å›žå¤æ—¶å¯¹éŸ³é‡çš„è®¾å®š
 - ```Others``` ```TTS``` ```pitch```ï¼šEdgeTTS åœ¨ç”ŸæˆAIè¯­éŸ³å›žå¤æ—¶å¯¹éŸ³è°ƒçš„è®¾å®š
 - ```Others``` ```compliment```ï¼šå½“ç”¨æˆ·å¤¸èµžæœºå™¨äººæ—¶æœºå™¨äººåšå‡ºçš„"è¿‡æ¿€ååº”"ã€‚æ¯”å¦‚ç”¨æˆ·å‘é€"{æœºå™¨äººåç§°}çœŸæ£’"

3. å®šæ—¶ç¾¤å‘æ¶ˆæ¯é…ç½®

    åˆ›å»º æˆ– æ‰“å¼€ ```timing_message.ini``` æ–‡ä»¶ï¼Œå¤åˆ¶ä»¥ä¸‹å†…å®¹åˆ°æ–‡ä»¶ä¸­ï¼ˆå¦‚æžœå·²æœ‰å†…å®¹åˆ™æ— é¡»å¤åˆ¶ï¼‰

```ini
11:45âŠ•å„ä½ è¿™ä¸ªç‚¹ä¹Ÿè¯¥åƒäº†å§ï¼Ÿ(â™¡>ð–¥¦<)/â™¥
```

ä»¥ âŠ• ä½œä¸ºåˆ†éš”ç¬¦ï¼Œå‰é¢çš„ä¸ºç¾¤å‘æ—¶é—´ï¼ˆhh:mmï¼‰ï¼ŒåŽé¢çš„ä¸ºç¾¤å‘çš„æ¶ˆæ¯å†…å®¹ã€‚

åˆ›å»º æˆ– æ‰“å¼€ ```blacklist.Sr``` æ–‡ä»¶ï¼Œåœ¨å…¶ä¸­å¡«å†™å®šæ—¶ç¾¤å‘æ¶ˆæ¯å±è”½çš„ç¾¤å·ã€‚ä¸€è¡Œä¸€ä¸ª

4. æƒé™ç»„ç”¨æˆ·é…ç½®

    åˆ›å»º æˆ– æ‰“å¼€ ```Manage_User.ini``` æ–‡ä»¶ï¼Œåœ¨å…¶ä¸­å¡«å†™æ‹¥æœ‰ Manage_User æƒé™çš„ç”¨æˆ·çš„QQå·ã€‚ä¸€è¡Œä¸€ä¸ª

    åˆ›å»º æˆ– æ‰“å¼€ ```Super_User.ini``` æ–‡ä»¶ï¼Œåœ¨å…¶ä¸­å¡«å†™æ‹¥æœ‰ Super_User æƒé™çš„ç”¨æˆ·çš„QQå·ã€‚ä¸€è¡Œä¸€ä¸ª

## ä½¿ç”¨
1. å¯åŠ¨åè®®ç«¯

å¦‚æžœæ‚¨æ˜¯ Windows ç”¨æˆ·ï¼Œè¯·åŒå‡» ```Lagrange.OneBot.exe```ï¼›

å¦‚æžœæ‚¨æ˜¯ Linux ç”¨æˆ·ï¼Œè¯·åœ¨ç¨‹åºæ ¹ç›®å½•å¤„æ‰“å¼€ç»ˆç«¯ï¼Œè¿è¡Œ
```shell
chmod +x ./Lagrange.OneBot
./Lagrange.OneBot
```

#### ç™»å½•åè®®ç«¯

é¦–æ¬¡æ‰“å¼€åè®®ç«¯æˆ–è€…ä¸Šæ¬¡é€€å‡ºç™»å½•ä¹‹åŽéœ€è¦ç™»å½•ä½ çš„QQè´¦å·ã€‚

è¯·ç­‰å¾…åè®®ç«¯çš„å‘½ä»¤æç¤ºç¬¦çª—å£æ˜¾ç¤ºä¸€ä¸ªäºŒç»´ç ï¼Œç«‹å³ä½¿ç”¨æ‰‹æœºè¿›è¡Œæ‰«ç ç™»å½•ï¼Œå¹¶å‹¾é€‰**ä¸‹æ¬¡è‡ªåŠ¨ç™»å½•**ï¼Œå³å¯å®Œæˆæœºå™¨äººQQè´¦å·ç»‘å®šã€‚

#### é€€å‡ºç™»å½•åè®®ç«¯

è¯·å…³é—­ç®€å„¿å’Œåè®®ç«¯çš„å‘½ä»¤æç¤ºç¬¦çª—å£ï¼Œç„¶åŽåœ¨QQæœºå™¨äººçš„æ ¹ç›®å½•ä¸‹ï¼Œåˆ é™¤æ‰€æœ‰ ```.db``` æ–‡ä»¶ï¼Œå³ç®—ä½œé€€å‡ºç™»å½•ã€‚ä¸‹æ¬¡å¯åŠ¨åè®®ç«¯ï¼Œè¯·å‚ç…§ä¸Šä¸€ç‚¹è¿›è¡Œç™»å½•ã€‚

2. å¯åŠ¨ä¸»ç¨‹åº

åœ¨ ```SetupWizard.pyw``` ä¸­æ‰“å¼€ **æ ¸å¯¹å¹¶åº”ç”¨è®¾ç½®** é¡µé¢ï¼Œç‚¹å‡» **å¯åŠ¨å§ï¼Œæˆ‘çš„ç®€å„¿ï¼** å³å¯å¯åŠ¨ä¸»ç¨‹åºã€‚**æ³¨æ„ä¸è¦å…³é—­ä¸»ç¨‹åºå’Œåè®®ç«¯çš„å‘½ä»¤æç¤ºç¬¦çª—å£**

æˆ–è€…ï¼Œæ‚¨ä¹Ÿå¯ä»¥åœ¨ç¨‹åºæ ¹ç›®å½•æ‰“å¼€ç»ˆç«¯ï¼Œå¹¶æ‰§è¡Œï¼š
```shell
python main.py
```
çœ‹åˆ° â„¹ï¸ INFO æˆåŠŸå»ºç«‹è¿žæŽ¥ çš„æ—¥å¿—ï¼Œå³è¡¨æ˜Žä¸Žåè®®ç«¯å¯¹æŽ¥æˆåŠŸã€‚

# â†‘â†“â†‘â†“ï¼ˆèˆžèŒæ–­ç½‘éŸ³ï¼‰ å¦‚ä½•ä½¿ç”¨å¦ä¸€ä¸ªåè®®ç«¯
æœ‰äº›äººå¯èƒ½ä¼šé‡åˆ° **Lagrange.OneBot**æ— æ³•æ­£å¸¸ç™»å½•çš„é—®é¢˜ï¼Œå±Šæ—¶å¯ä»¥ä½¿ç”¨**NapCatQQ**è¿›è¡Œè´¦å·çš„ç™»å½•ä¸Žå¯¹æŽ¥

è¯·çœ‹[NapCatQQä½¿ç”¨æ•™ç¨‹](https://github.com/SRInternet-Studio/Jianer_QQ_bot/wiki/NapCatQQ%E4%BD%BF%E7%94%A8%E6%95%99%E7%A8%8B)

â„°ð“ƒð’¿â„´ð“Ž It!